image: node:16.20.2

stages:
  - verify
  - build
  - test

check_node:
  stage: verify
  script:
    - if ! command -v node &> /dev/null; then echo "Node is not installed"; exit 1; fi
    - echo "Node is installed on the system."

test_case:
  stage: test
  script:
    - echo "Installing the dependencies"
    - npm config set registry http://registry.npmjs.org
    - npm install @angular-devkit/build-angular
    - npm install @angular-devkit/cli
    - npm install @angular-devkit/compiler-cli
    - npm install @angular-devkit/language-service
    - echo "Running test"
    - npm run test


build_project:
  stage: build
  script:
    - echo "Deleting the old dist folder"
    - rm -rf dist
    - echo "Installing the dependencies"
    - npm config set registry http://registry.npmjs.org
    - npm install @angular-devkit/build-angular
    - npm install @angular-devkit/cli
    - npm install @angular-devkit/compiler-cli
    - npm install @angular-devkit/language-service
    - echo "Building the project with default configuration"
    - npm run build
    - echo "Build created Successfully. üëç"
